## **Python Major Troubleshooting [101-120]**

Recommended Post: 【Python】 [Python Table of Contents](https://jb243.github.io/pages/786)

---

<br>

#### **101. AttributeError: 'builtin_function_or_method' object has no attribute 'default'**

⑴ (****package****) Solution: Downgrade torch_geometric version from 2.6.1 to 1.7.2 or 2.0.0 ([ref](https://github.com/pyg-team/pytorch_geometric/discussions/9683))

<br>

<br>

#### **102. ImportError: Could not import sentence_transformers python package. Please install it with `pip install sentence-transformers`.**

⑴ (****package****) Problem Description: `embedding_function = SentenceTransformerEmbeddings(model_name="all-MiniLM-L6-v2")`

⑵ (****package****) Solution: Downgrade huggingface_hub version to 0.24.6., or

<br>

```python
pip uninstall huggingface_hub
pip uninstall sentence_transformers
pip install --force-reinstall sentence-transformers==2.2.2 huggingface_hub==0.16.4
```

<br>

<br>

#### **103. TypeError: 'type' object is not subscriptable**

⑴ (**package**) Solution: Upgrade python version from 3.8 to 3.9.

<br> 

<br>

#### **104. AttributeError: module 'numpy.lib' has no attribute 'pad'**

⑴ (**package**) **Solution 1.** Downgrade numpy version

⑵ (**grammar**) **Solution 2.** Change `numpy.lib.pad` to `numpy.pad`.

<br> 

<br>

#### **105. ValueError: <COMPRESSION.JPEG: 7> requires the 'imagecodecs' package**

⑴  (**package**) Solution: `pip install imagecodecs` or `conda install -c conda-forge imagecodecs`

<br>

<br>

#### **106. AttributeError: module 'scipy' has no attribute 'io'**

⑴ (**grammar**) Problem

<br>

```python
from scipy.sparse import csr_matrix

sparse_dat = csr_matrix(dat)
scipy.io.mmwrite("sparse_matrix.mtx", sparse_dat)
```

<br>

⑵ (**grammar**) Solution 

<br>
 
```python
from scipy.sparse import csr_matrix
from scipy.io import mmwrite

sparse_dat = csr_matrix(dat)
mmwrite("sparse_matrix.mtx", sparse_dat)
```

<br>

<br>

#### 107. InvalidIndexError: Reindexing only valid with uniquely valued Index objects

⑴ (**grammar**) Solution: `adata.var_names_make_unique()`

<br>

<br>

#### 108. ModuleNotFoundError: No module named 'graph_tool'

⑴ (**package**) Solution: `conda install -c conda-forge graph-tool` ([ref](https://graph-tool.skewed.de/installation.html))

⑵ **Suggestion:** Since there is no installation method provided via pip, I've frequently encountered package conflict issues. Whenever graph-tool or graph_tool is used, I usually paraphrase the code with the help of ChatGPT and use an alternative instead.

<br>

<br>

#### 109. ModuleNotFoundError: No module named 'abc_atlas_access'

⑴  (**package**) Solution: `pip install git+https://github.com/alleninstitute/abc_atlas_access.git`

<br>

<br>

#### 110. ImportError: /.../libtorch_cpu.so: undefined symbol: iJIT_NotifyEvent

⑴ (**package**) Cause: This error is a typical PyTorch–Intel MKL/OpenMP conflict issue, caused when the PyTorch library fails to load Intel oneDNN/JIT-related symbols.

⑵ (**package**) Solution: Match the PyTorch version.

<br>

```python
## as an example
pip uninstall torch
pip install --index-url https://download.pytorch.org/whl/cu121 torch==2.3.1 torchvision==0.18.1 torchaudio==2.3.1
```

<br>

<br>

#### 111. TypeError: unsupported operand type(s) for |: 'type' and 'NoneType'

⑴ (**package**) Solution: Python >= 3.10

<br>

<br>

#### 112. ImportError: libcusparse.so.12: undefined symbol: __nvJitLinkComplete_12_4, version libnvJitLink.so.12

⑴ (**package**) Solution: Install a new torch according to the given GPU version

<br>

```python
# for example,
pip uninstall -y torch torchvision torchaudio
pip install --index-url https://download.pytorch.org/whl/cu121 torch==2.3.1 torchvision==0.18.1 torchaudio==2.3.1
```

<br>

<br>

#### 113. ImportError: libXrender.so.1: cannot open shared object file: No such file or directory

⑴ (**package**) Solution: `sudo apt-get install libxrender1` ([ref](https://stackoverflow.com/questions/52547833/getting-importerror-libxrender-so-1-cannot-open-shared-object-file-when-impo))

<br>

<br>

#### 114. PydanticImportError: `BaseSettings` has been moved to the `pydantic-settings` package.

⑴ (**package**) Problem Description: Package version conflict during `conda install -c psi4 psi4`

⑵ (**package**) Solution: `pip install "pydantic<2.0.0"`

<br>

<br>

#### 115. AttributeError: module 'torch.utils._pytree' has no attribute 'register_pytree_node'

⑴ (**package**) Solution: `pip install -U "torch==2.2.*" "transformers==4.37.*"`

<br>

<br>

#### 116. **ImportError: cannot import name 'is_flash_attn_available' from 'transformers.utils.import_utils'**

⑴ (**package**) Solution: `pip install -U "transformers==4.34.1"`

⑵ [Reference](https://github.com/huggingface/transformers/issues/27319)  

<br>

<br>

#### 117. **ModuleNotFoundError: No module named 'pkg_resources'**

⑴ (**package**) Cause: `pkg_resources` is totally removed from `setuptools 82.0.0`.

⑵ (**package**) **Solution 1.** conda: `conda install -y "setuptools<81"`

⑶ (**package**) **Solution 2.** Python

<br>

```
import sys, subprocess
subprocess.check_call([sys.executable, "-m", "pip", "install", "--force-reinstall", "setuptools<81"])
```

<br>

<br>

#### 118. **AttributeError: module 'numpy' has no attribute 'bool'.**

⑴  (**package**) **Solution:** `pip uninstall -y numpy; pip install "numpy==1.23.5"`

<br>

---

_Input: 2025.01.21 23:29_
