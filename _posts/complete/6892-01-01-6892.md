## **Python 中有用的函数**

推荐：【Python】【Python索引】(https://jb243.github.io/pages/786)、【生物信息学】【生物信息分析索引】(https://jb243.github.io/pages/836) 

---

**1.** [概述](#1-概述)

**2.** [基础知识](#2-基础知识)

**3.** [数学函数](#3-数学函数)

**4.** [文件输入和输出](#4-文件输入和输出)

**5.** [数据结构](#5-数据结构)

**6.** [图像处理](#6-图像处理)

**7.** [数据科学](#7-数据科学)

**8.** [深度学习函数](#8-深度学习函数)

**9.** [异常处理](#9-异常处理)

**10.** [生物信息学](#10-生物信息学)

---

**a.** [Python语法](https://jb243.github.io/pages/436) 

**b.** [Python 应用程序库](https://jb243.github.io/pages/2370)

**c.** [R 中有用的主要函数集合](https://jb243.github.io/pages/2156)

---

<br>

## **1.概述**

⑴ 下面定义的函数可以按如下方式调用。从 GitHub 调用 .py 到 python。

<br>

__受保护_0__

<br>

⑵ 下面定义的函数可以如下使用。 Python 在定义函数时使用“def”，就像 C 语言一样。

<br>

__受保护_1__

<br>

<br>

## **2.基础知识**

⑴ 必须记住的代码

> ① 类型检查：`type(x)`

> ② 长度：`len(x)`

> ③ 尺寸（例如`numpy.ndarray`、`cv2.imread`）：`x.shape` 

> ④ 尺寸（例如`PIL.PngImagePlugin.PngImageFile`、`PIL.Image.open`）：`x.size`

> ⑤ 投射到 `int`: `.astype(int)`

> ⑥ 给定数组中的一组唯一元素：`.unique()`

> ⑦ 等待 x 秒：`time.sleep(x)`

> ⑧ 当您有列表时创建带索引的 for 循环的简单方法：`for index, e in enumerate(my_list): ...`

> ⑨ 将给定的句子用“_”分割，只取前面的部分：`myStr.split('')[0]`

⑵ 将自然数补零，使其总共五位数的函数

<br>

__受保护_2__

<br>

⑶ 给定字符串全部小写字母或全部大写字母

<br>

__受保护_3__

<br>

⑷ 给定字符串是否包含部分字符串 

<br>

__受保护_4__

<br>

⑸ 给定字符串是否以特定字符串结尾

<br>

__受保护_5__

<br>

⑹ 给定字符串（give_str）是否包含特定字符串（partial_str）

<br>

__受保护_6__

<br>

⑺ 从给定字符串（str）中删除前几个字符并返回它们的函数

<br>

__受保护_7__

<br>

⑻ 从给定字符串 (str) 中删除最后几个字符并返回它们的函数

<br>

__受保护_8__

<br>

⑼ 给定元素(e)是否包含在列表(l)中

<br>

__受保护_9__

<br>

⑽ 输出哪个元素（e）在列表（l）中的函数

<br>

__受保护_10__

<br>

⑾ 输出两个列表交集的函数

<br>

__受保护_11__

<br>

⑿ 日期表示法转换功能：以“Mar 02, 2018”转换为20180301。

<br>

__受保护_12__

<br>
	
⒀ 创建一个包含两个列表的数据框

<br>
 
__受保护_13__

<br>
	
⒁ 获取函数的源代码

<br>

__受保护_14__

<br>

⒂ 接收字符串形式的变量名称并动态利用它们

<br>

__受保护_15__
 
<br>

<br>

## **3。数学函数**

⑴ 求最大公约数的代码

<br>

__受保护_16__

<br>
  
<br>  
  
## **4。字段输入和输出**

⑴csv文件读取

<br>

__受保护_17__

<br>

⑵ 文本文件读取

<br>

__受保护_18__

<br>

⑶ 切换到数据框并写入.csv：使用 iloc 从 pandas.DataFrame 获取精确的行和列

<br>

__受保护_19__

<br>
 
⑷ 读取目录下所有.csv文件

<br>

__受保护_20__

<br>

⑸ [创建、读取和分组 HDF (.h5) 文件](https://nate9389.tistory.com/2166)⑹ 网站爬取（[参考](https://medium.com/towards-entrepreneurship/importing-a-csv-file-from-github-in-a-jupyter-notebook-e2c28e7e74a5))

<br>

__受保护_21__

<br>

⑺ 合并 PDF 文件（[参考](https://pypdf2.readthedocs.io/en/latest/user/merging-pdfs.html)）

<br>

__受保护_22__

<br>

⑻ HTML 到 MarkDown

<br>

__受保护_23__

<br>

⑼ MarkDown 到 HTML

<br>

__受保护_24__

<br>

⑽ 合并给定文件夹中的所有 PDF 文件（按字母顺序排列）

<br>

__受保护_25__
<br>

⑾ 收集特定 HTML 文档的所有下载链接，然后下载文件

<br>

__受保护_26__
<br>

⑿ 将一个 GIF 文件分割成多个 PNG 文件的代码。

<br>

__受保护_27__

<br>

⒀ 输出目录树结构的代码

<br>

__受保护_28__
<br>

⒁ 将 PDF 文件拆分为每个页面的单独 PDF 文件

<br>

__受保护_29__
 
<br>

<br>
  
## **5。数据结构**

⑴ 概述

> ① [数组](https://nate9389.tistory.com/2132#footnote_link_67_51)

> ② [链接列表](https://nate9389.tistory.com/2132#footnote_link_67_52) 

> ③ [堆栈](https://nate9389.tistory.com/2132#footnote_link_67_53) 

> ④ [队列](https://nate9389.tistory.com/2132#footnote_link_67_54) 

> ⑤ [树](https://nate9389.tistory.com/2132#footnote_link_67_55) 

> ⑥ [图](https://nate9389.tistory.com/2132#footnote_link_67_56) 

> ⑦ [哈希](https://nate9389.tistory.com/2132#footnote_link_67_57) 

> ⑧ 【设置】(https://nate9389.tistory.com/2132#footnote_link_67_58)  

⑵ 统计岛屿算法：统计世界上1为陆地、0为水域时岛屿数量的函数，是一个M×N的列表

<br>

__受保护_30__

<br>
  
<br>
  
## **6。图像处理**

⑴【基本图形生成代码】(https://nate9389.tistory.com/1192#footnote_link_67_53)

> ① 给定 x, y 绘制散点图的函数

<br>

__受保护_31__

<br>

> ② 绘制给定图像直方图的函数

<br>

__受保护_32__

<br>

> ③ 绘制4参数逻辑（4PL）曲线的代码：在[药理学](https://jb243.github.io/pages/2197)的药物反应曲线中大量使用。

<br>

__受保护_33__

<br>

⑵ 图像保存

> ① 将图像保存为 png 的示例 ([ref](https://stackoverflow.com/questions/9295026/how-to-remove-axis-legends-and-white-padding))

<br>
 
__受保护_34__

<br>

> ② 将图像另存为pdf的示例

<br>

__受保护_35__

<br>
 
⑶ cv2图像RGB颜色重排

<br>
 
__受保护_36__

<br>

⑷ cv2图像resize：例如img为(1024, 1024, 3)，img_re为(512, 512, 3)。

<br>
 
__受保护_37__

<br>
 
⑸ RGB图像到灰度图像的转换

<br>

__受保护_38__

<br>

⑹ 将红色图像（1×W×H）从3通道RGB图像修改为二维图像（W×H）的函数 

<br>

__受保护_39__

<br>

⑺ 将图像中的一个值替换为另一个值的函数

<br>
 
__受保护_40__

<br>

⑻ 将整数的 numpy.ndarray 更改为实数的 numpy.ndarray ([参考](https://rfriend.tistory.com/285))

<br>

__受保护_41__

<br>

⑼ 一幅图像中红色和绿色的相关性

<br>
 
__受保护_42__

<br>
 
⑽ 两幅图像之间的相关性

<br>

__受保护_43__

<br>

⑾ 一幅 3D 图像中红色和绿色之间的相关性

<br>

__受保护_44__

<br>

⑿ 获取一对图像的SSIM值的代码

<br>

__受保护_45__

<br>

⒀ 获取一对图像的互信息值的代码（[参考](https://matthew-brett.github.io/teaching/mutual_information.html)）

<br>

__受保护_46__

<br>

⒁ 获取回归曲线的代码

<br>

__受保护_47__

<br>

⒂ 在空间转录组学 (ST) 中给定背景图像、x 坐标、y 坐标和颜色 c 时，创建点映射图像。

<br>

__受保护_48__

<br>⒃ 决定图像浮雕和凹雕的函数：如果返回值（-1到1）为正，则为浮雕；否则为凹版。

<br>

__受保护_49__

<br>

⒄ 一个有用的代码，可以组合多个图像来表示一个图像

<br>

__受保护_50__

<br>

⒅ 图片base64编码被截断时的解密代码。

<br>

__受保护_51__

<br>

⒆ 图表到文本 ([ref](https://github.com/JasonObeid/Chart2Text)) 

⒇ 创建与给定图像大小相同的随机图像

<br>

__受保护_52__

<br>

⒇ [大津阈值法](https://jb243.github.io/pages/2150#7-other-clustering-algorithms)

<br>

__受保护_53__

<br>

⒇ 在互联网上可视化图像

<br>

__受保护_54__

<br>

<br>

## **7.数据科学**

⑴ K表示聚类

<br>

__受保护_55__

<br>

⑵ 根据序列计算基尼系数

<br>

__受保护_56__

<br>  

⑶ 给定序列时计算香农项

<br>

__受保护_57__

<br>

<br>
  
## **8.深度学习功能**

⑴ 深度学习示例：将深度学习模型应用于 MNIST（即手写数字）数据集。

<br>

__受保护_58__

<br>

⑵ 当存在 60,000 个数据 Xtr 和 60,000 个标签 Ytr 时将 10,000 个 Xte 分类为 KNN 的算法

<br>

__受保护_59__

<br>

⑶ 一维CNN实现的二元分类器功能

<br>

__受保护_60__

<br>

⑷ 通过预训练的CNN从任意图像中提取512维特征的函数

<br>

__受保护_61__

<br>

⑸ 从 Hugging Face 中获取 BERT 或 BioBERT 来为给定句子创建注意力矩阵的函数

<br>

__受保护_62__

<br>

⑹ 将任意变长自然语言句子转换为 384 维，同时考虑其含义的函数。 （参见 [CeLLaMA](https://github.com/portrai-io/CELLama/tree/main)）

<br>

__受保护_63__

<br>

⑺【自然语言处理与LLM实用函数合集】(https://jb243.github.io/pages/2404)

<br>

<br>

## **9。异常处理**

⑴ 基本异常处理语法

<br>

__受保护_64__

<br>

⑵ 打印错误信息（[参考](https://stackoverflow.com/questions/1483429/how-do-i-print-an-exception-in-python)）

<br>

__受保护_65__

<br>

<br>

## **10。生物信息学**

⑴ 获取高变异基因的代码

<br>

__受保护_66__

<br>

⑵ 获取最高表达基因的代码

<br>

__受保护_67__

<br>

⑶ GO 情节（第 1 版）(`not recommended`)

<br>

__受保护_68__

<br>

⑷ GO 情节（第 2 版）(`recommended`)

<br>

__受保护_69__

<br>

> ① gseapy 似乎与 plt.subplot 不兼容。

⑸ 使用表格将ensembl.gene 转换为gene.symbol 

<br>

__受保护_70__

<br>

⑹ 使用表格将gene.symbol转换为ensembl.gene

<br>

__受保护_71__

<br>

⑺ 人类基因、小鼠基因互变

<br>

__受保护_72__

<br>

⑻ 当存在包含matrix.mtx、barcodes.tsv、features.tsv和spatial文件夹的tissue_dir目录时，Python中读取Visium数据的代码。

<br>

__受保护_73__

<br>

⑼【有机化学相关Python函数合集】(https://jb243.github.io/pages/2396)

<br>

![图片](https://github.com/JB243/jb243.github.io/assets/55747737/a6fbafe4-af90-4800-8a9f-0a1cad6b20b8)

<br>

⑽ 获取人和小鼠基因序列（但只需人类基因）

<br>

__受保护_74__

 <br>

⑾ 将图像放入 Visium anndata obs 的 Python 代码。

<br>

__受保护_75__

<br>

⑿ 将Visium ST数据读取为AnnData，然后进行数据QC（质量控制）操作的代码

<br>

__受保护_76__

<br>

⒀ 放大 `sc.pl.spatial` 尺寸。

<br>

__受保护_77__

<br>

⒁ 从 `sc.pl.spatial` 中删除颜色条

<br>

__受保护_78__

<br>

⒂ 转置数据：交换基因名称和条形码名称

<br>__受保护_79__

<br>

⒃ 当您有matrix.mtx、barcodes.tsv 和features.tsv（或genes.tsv）时创建h5ad 文件：假设所有三个文件具有相同的前缀。

<br>

__受保护_80__

<br>

⒄ 将 adata 对象列表连接成单个 adata 的代码

<br>

__受保护_81__

<br>

⒅ 用于提供 H5 文件中每个条形码的读取次数的代码。

<br>

__受保护_82__

<br>

⒆ 用于从 h5 文件提供特征（基因）的代码。

<br>

__受保护_83__

<br>

⒇ 使用omnipath输出包含特定基因的所有配体-受体对

<br>

__受保护_84__

<br>

⒇ 返回表示 DNA 序列的输入字符串的反向补码。 

<br>

__受保护_85__

<br>

⒇ 从多个序列列表构建位置频率矩阵 (PFM)

> ① 对于 A、C、G 和 T，`ord(char) >> 1 & 3` 的结果分别变为 0、1、3 和 2。

> ② 长度 ≥ max(len(seq))

<br>

__受保护_86__

<br>

⒇ 从 PFM 构造 PWM（统一分配 p = 0.25 和 bg = 0.25）

<br>

__受保护_87__

<br>

⒇ 根据 PWM 计算给定序列的得分。

<br>

__受保护_88__

<br>

⒇ Motif 搜索算法：对于长序列，搜索与 PWM 分数最高的 PWM 长度对应的 k 聚体，同时考虑 + 链和 - 链。

<br>

__受保护_89__

<br>

⒇ BWT模式匹配：测序比对的核心原理

<br>

__受保护_90__

<br>

⒇ [GSEA](https://jb243.github.io/pages/2050#9-common-3-gene-set-enrichment) Python 代码

<br>

__受保护_91__

<br>

⒇ [BANKSY](https://www.nature.com/articles/s41588-024-01664-3): 空间转录组学的空间域识别算法

<br>

__受保护_92__

<br>
 
---
    
*输入：2022.05.07 00:43*