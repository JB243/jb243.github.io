## **Python 主要故障排除 [61-80]**

推荐帖子**：** 【Python】【Python目录】(https://jb243.github.io/pages/786)

---

<br>

#### **61\。导入错误：libGL.so.1：无法打开共享对象文件：没有这样的文件或目录**

 ⑴ (**package**) 问题**：**导入cv2时出现问题。

 ⑵ (**软件包**) **解决方案1：** 对于Ubuntu/Debian。

<br>

__受保护_0__

<br>

 ⑶ (**软件包**) **解决方案2：** 对于CentOS/Fedora。

<br>

__受保护_1__

<br>

<br>

#### **62\。 AttributeError：模块“keras.optimizers”没有属性“Adam”**

 ⑴（**语法**）解决方案**：**将以下代码插入到有问题的函数中。

<br>

__受保护_2__

<br>

⑵（**语法**）注意**：**有些代码使用`optimizers.adam`而不是`optimizers.Adam`。请注意，这可能会导致错误，具体取决于环境，但并非总是如此。

<br>

<br>

#### **63\。 ImportError：无法从“scanpy._metadata”导入名称“__author__”（/opt/conda/lib/python3.8/site-packages/scanpy/_metadata.py）**

⑴ (**package**) 解决办法**：** 首先需要安装`scanpy=1.9.0`。

⑵ 视为Kubflow特有问题

<br>

<br>

#### **64。估计内存需求时读取图像文件 /home/jovyan/\_janus/microbiome/Region1\_colon\_d0\_rotated.tif 时出错：TIFF 具有不受支持的颜色类型 - 每个组件必须为 8 位 RGB 或 8/16 位灰色**
​
⑴（**语法**）问题**：** 文件 Region1\_colon\_d0\_rotated.tif 是一个高深度的 .tif 文件，这是问题所在。
​
⑵（**语法**）解决方案**：**在[https://online-image-converter.com/](https://online-image-converter.com/)处转换为8位.tiff文件。
​
<br>

<br>

#### **65。 java.lang.IllegalArgumentException：不支持的类文件主要版本 55**
​
⑴（**package**）解决方案**：**在Linux上升级或降级Java版本（[ref](https://gatk.broadinstitute.org/hc/en-us/community/posts/360056174592-MarkDuplicatesSpark-crash)）。

<br>

<br>

#### **66。 java.lang.IllegalArgumentException：不支持的类文件主要版本 55**
​
⑴ (**package**) 问题：`cnv.io.genomic_position_from_gtf('./gencode.v19.annotation.gtf.gz', adata=adata)` 中发生错误

⑵（**package**）解决方案：将polars版本改为0.17以下，如`pip install polars==0.16.1`（[ref](https://github.com/pola-rs/polars/pull/7970)）

> 由于使用了 Polars.toggle_string_cache，与 >=0.17 的 Polars 版本不兼容。

<br>

<br>

#### **67。 ModuleNotFoundError：没有名为“ot”的模块**

⑴（**包**）解决方案**：** `pip install POT`

<br>

<br>

#### **68。属性错误：模块“scvi”没有属性“模型”**

⑴（**包**）解决方案**：** `pip install scvi-tools`

<br>

<br>

#### **69。 JVMNotFoundException：找不到 JVM 共享库文件 (libjvm.so)。尝试正确设置 JAVA_HOME 环境变量。**

⑴（**包**）解决方案1.`sudo apt install default-jre`

⑵（**包**）解决方案2.`sudo apt install openjdk-8-jre-headless`

⑶（**包**）解决方案3.`sudo apt install openjdk-11-jre-headless`

⑷（**包**）解决方案4.`sudo apt install openjdk-13-jre-headless`

⑸（**包**）解决方案5.`sudo apt install openjdk-16-jre-headless`

⑹（**包**）解决方案6.`sudo apt install openjdk-17-jre-headless`

⑺（**包**）解决方案7.手动安装

> ① 从[Oracle官方网站](https://www.oracle.com/java/technologies/javase-jdk11-downloads.html)安装Java **:** 使用`wget`。

> ② `export JAVA_HOME=/path/to/java/jdk`

> ③ `export PATH=$PATH:$JAVA_HOME/bin`

> ④ `echo $JAVA_HOME  # verification`

> ⑤ `java -version  # verification`

> ⑥ 重启并重新运行 

<br>

<br>

#### **70。 ValueError：除了串联轴之外的所有输入数组维度都必须完全匹配，但沿着维度 0，索引 0 处的数组的大小为 316，索引 1 处的数组的大小为 1**

⑴（**语法**）问题情况：当计算相关系数的两个参数不具有相同的`shape`时，会调用错误。⑵（**语法**）解决方案：一般将两个参数都用`.flatten()`处理成一维，然后计算相关系数即可解决。但是，如果其中一个是Matrix形式，用`.flatten()`压平是不行的，所以在这种情况下，需要将其改为`np.array`，然后计算相关系数。

<br>

__受保护_3__

<br>

<br>

#### **71。 `scanpy.pl.spatial`** 中字体大小不变的情况

⑴（**语法**）问题情况：虽然使用`plt.rc('font', size = 10)`统一改变scanpy图中的字体大小，但在某些情况下不会发生这种情况。

⑵（**语法**）解决方案：删除以下代码（如果存在）（防止plt和scanpy设置冲突）。

<br>

__受保护_4__

<br>

<br>

#### **72。 ImportError：无法从“werkzeug.urls”导入名称“url_decode_stream”**

⑴（**package**）解决方案（[ref](https://stackoverflow.com/questions/77215107/importerror-cannot-import-name-url-decode-from-werkzeug-urls)）

<br>

__受保护_5__

<br>

<br>

#### **73。类型错误：“模块”对象不可调用**

⑴（**语法**）解决方案

<br>

__受保护_6__

<br>

<br>

#### 74. 错误：已安装 urllib3 2.2.1，但 {'botocore'} 需要 urllib3<1.27,>=1.25.4

⑴（**package**）解决方案（[ref](https://github.com/Yelp/elastalert/issues/3037)） 

<br>

__受保护_7__

<br>

<br>

#### 75. UFuncTypeError: ufunc 'add' 不包含签名匹配类型的循环 (dtype('<U32'), dtype('<U32')) -> dtype('<U32')

⑴（**语法**）原因：随着 Space Ranger 的更新，生成了 `tissue_positions.csv` 而不是 `tissue_positions_list.csv`，并且由于创建了不正确的标头（见下文），在使用 `scanpy.read_visium` 后查看带有 `scanpy.pl.spatial` 的 AnnData 时会发生错误，而没有反映此更改。

<br>

__受保护_8__

<br>

⑵（**语法**）解决方案：将`tissue_positions.csv`重命名为`tissue_positions_list.csv`，并像以前的版本一样删除标头。

<br>

<br>

#### 76.导入错误：无法从“flax”导入名称“optim”

⑴（**package**）解决方案（[ref](https://github.com/google-research/scenic/issues/476)）：

<br>

__受保护_9__

<br>

<br>

#### 77. OSError：无法打开文件：base_htrans.gin。搜索到的配置路径：['', 'third_party/py/meliad/transformer/configs']。

⑴（**语法**）解决方案：将文件`./meliad_lib/meliad/transformer/configs/base_htrans.gin`移动到上面列出的路径之一。

⑵（**语法**）【参考】(https://github.com/google-deepmind/alphageometry/issues/81)

<br>

<br>

#### 78. ModuleNotFoundError：没有名为“gin”的模块

⑴ (**package**)解决方案：pip install gin-config ([ref](https://stackoverflow.com/questions/56298451/modulenotfounderror-no-module-named-gin))

<br>

<br>

#### 79. ImportError：无法加载需要“tk”交互框架的后端“TkAgg”，因为“headless”当前正在运行

⑴（**语法**）解决方案1. `import matplotlib` → `matplotlib.use('TKAgg')` → `import matplotlib.pyplot as plt` ([ref](https://stackoverflow.com/questions/55811545/importerror-cannot-load-backend-tkagg-which-requires-the-tk-interactive-fra))

⑵（**语法**）解决方案2.就我而言，有时我删除环境并重新安装才能再次运行。

<br>

<br>

#### 80. OSError：无法打开资源

⑴（**语法**）问题上下文：如果找不到字体文件的位置，则在指定自定义字体时会出现问题。

⑵（**语法**）解决方案（参考）：使用替代字体如下：

<br>

__受保护_10__

<br>

---

_输入：2023.08.17 14:29_

_修改时间：2024.05.05 22:00_