## **MinIO 实用函数合集**

推荐帖子：【Python】【Python目录】(https://jb243.github.io/pages/786)

---

**1.** [MinIO](#1-minio)

**2.** [有用的Python函数集合](#2-collection-of-useful-python-functions)

**3.** [有用终端命令集合](#3-collection-of-useful-terminal-commands)

---

<br>

## **1.最小IO**

⑴ 兼容AWS S3的对象存储系统

⑵ 高版本[Synology NAS](https://jb243.github.io/pages/2247)

> ① **原因1.** 可设置上传后不可删除

> ② **原因2.** 更高级别的安全性

⑶ 使用方法

> ① **步骤 1.** [此处]安装 MinIO 客户端(https://min.io/docs/minio/linux/reference/minio-mc.html):
如果您使用的是 Linux Intel

<br>

__受保护_0__

<br>

> ② **步骤2.** 生成MinIO Access Key、Secret Key

> ③ **步骤 3.** `mc alias set [MinIO Name] [MinIO URL] [ACCESSKEY] [SECRETKEY]`

> ④ **步骤 4.** 参见下文

> ⑤ 与 ChatGPT 相关的问题导致代码编写得非常好

<br>

<br>

## **2\.有用的 Python 函数集合**

⑴ 从 MinIO 下载（版本 1）

<br>

__受保护_1__

<br>

> ① access_key、secret_key

>> ○ 使用 MinIO > Access Keys > 创建访问密钥来生成

>> ○ Secret_key只有第一次生成时才能知道，所以请务必记下

> ② 对象名称

>> ○ 示例 **:**
“https://s3.AAA.co.kr/browser/bucket_name/folder1/subfolder2/myobject.txt”

>> ○ object_name 为“folder1/subfolder2/myobject.txt”

> ③ 文件路径

>> ○ 示例：“./myobject.txt”

> ④ **故障排除1.** 发生错误：调用时发生错误（400）
HeadObject 操作：错误请求

>> ○ 原因：object_name 不合适

> ⑤ **故障排除2.** 发生错误：调用时发生错误（404）
HeadObject 操作：未找到

>> ○ 原因：object_name 不合适

> ⑥ **故障排除3.** 发生错误：[Errno 20] 不是目录：

>> ○ 原因：file_path 不合适

⑵ 从 MinIO 下载（版本 2）

<br>

__受保护_2__

<br>

⑶ 上传至MinIO

> ① **方法1.** put_object

<br>

__受保护_3__

<br>

> ② **方法2.** fput_object

<br>

__受保护_4__

<br>

> ③ **故障排除 1.** InvalidEndpointError: InvalidEndpointError: message: 主机名
不能有一个计划。

>> ○ 原因：您应该使用 `endpoint_url = "my-minio-server.com"` 而不是 `endpoint_url = "https://my-minio-server.com"`

>> ○ 更具体地说，使用 `endpoint_url = "my-minio-server.com:port"` 包括端口号

> ④ **故障排除 2.** InvalidArgument: InvalidArgument: message: 无效参数

>> ○ 就我而言，当我省略端点_url 中的端口号时，会出现该消息

> ⑤ **故障排除 3.** InvalidArgumentError: InvalidArgumentError: message: 零件尺寸
* max_parts(10000) 小于输入长度。

>> ○ 有相当多的情况下，根据文件大小，用 Python 上传到 MinIO 不起作用

⑷ 打印错误日志

<br>

__受保护_5__

<br>

⑸ 禁用错误日志打印

<br>

__受保护_6__

<br>

⑹ 故障排除

> ① `MaxRetryError: HTTPConnectionPool(host='#.#.#.#', port={port}): Max retries exceeded with url: / (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at #>: Failed to establish a new connection: [WinError #] The connection could not be made because the connected party did not respond, or the connection was closed because there was no response from the host'))`

>> ○ 解决方案：检查 VPN 连接

<br>

<br>

## **3\.有用的终端命令集合**

⑴ 安装：参考【MinIO客户端技术文档】(https://min.io/docs/minio/linux/reference/minio-mc.html) (示例：64位Intel)

<br>

__受保护_7__

<br>

⑵ CLI 设置：获取访问 MinIO 服务器权限的概念。使用 `mc alias set` 命令

⑶ 文件输入/输出：使用`mc cp`命令

> ① `--recursive`

> ② `--limit-upload`

<br>

---

_输入：2023.08.20 10:33_